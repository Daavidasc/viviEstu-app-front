<div class="app-container">
  <!-- Pasa el objeto currentUser al navbar -->
  <app-student-navbar [currentUser]="currentUser" />

  <main class="main-content">
    <div class="container" *ngIf="currentUser">

      <!-- Header Section -->
      <div class="dashboard-header">
        <h1 class="greeting">Hola {{ currentUser.name }}</h1>
        <div class="subtitle-row">
          <h2 class="section-subtitle">Recomendados en tu zona: <span class="highlight">{{ currentUser.preferredDistrict
              }}</span></h2>
          <a [routerLink]="['/student/districts']" class="btn-districts">Ver zonas</a>
        </div>
      </div>

      <!-- Listado 1: Recomendados en tu zona -->
      <div class="accommodation-list" *ngIf="zoneRecommendations.length > 0; else noZoneData">
        <app-accommodation-card *ngFor="let item of zoneRecommendations" [accommodation]="item"
          (favoriteToggled)="handleFavoriteToggle($event)">
        </app-accommodation-card>
      </div>

      <ng-template #noZoneData>
        <div class="empty-state">
          <p>No encontramos alojamientos en {{ currentUser.preferredDistrict }} por el momento.</p>
        </div>
      </ng-template>

      <div class="see-more-container" *ngIf="zoneRecommendations.length > 0">
        <a [routerLink]="['/student/accommodations']" [queryParams]="{ district: currentUser.preferredDistrict }"
          class="see-more-link">Ver más en {{ currentUser.preferredDistrict }}...</a>
      </div>

      <!-- Listado 2: Recomendados cerca a Universidad -->
      <div class="section-spacer"></div>
      <h2 class="section-subtitle secondary">Recomendados cerca a <span class="highlight">{{ currentUser.university
          }}</span></h2>

      <div class="accommodation-list" *ngIf="uniRecommendations.length > 0; else noUniData">
        <app-accommodation-card *ngFor="let item of uniRecommendations" [accommodation]="item"
          (favoriteToggled)="handleFavoriteToggle($event)">
        </app-accommodation-card>
      </div>

      <ng-template #noUniData>
        <div class="empty-state">
          <p>No hay recomendaciones cerca a {{ currentUser.university }} actualmente.</p>
        </div>
      </ng-template>

      <div class="see-more-container" *ngIf="uniRecommendations.length > 0">
        <a [routerLink]="['/student/accommodations']" [queryParams]="{ university: currentUser.university }"
          class="see-more-link">Ver más cerca a la U...</a>
      </div>

    </div>
  </main>

  <!-- FOOTER -->
  <app-footer />
</div>