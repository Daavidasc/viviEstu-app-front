<div class="requests-container">
    @if (requests.length === 0) {
    <div class="no-requests">
        <p>No hay solicitudes para este alojamiento</p>
    </div>
    } @else {
    <div class="requests-list">
        @for (request of requests; track request.requestId) {
        <div class="request-card">

            <div class="request-header">
                <div class="student-info">
                    @if (request.image) {
                    <img [src]="request.image" [alt]="request.title" class="student-photo">
                    }
                    <div class="student-details">
                        <h4 class="student-name">{{ request.title }}</h4>
                        @if (request.subtitle) {
                        <span class="student-university">{{ request.subtitle }}</span>
                        }
                    </div>
                </div>
                <span class="request-status" [class]="'status-' + request.statusColor">
                    {{ request.status }}
                </span>
            </div>

            <div class="request-stats">
                <div class="stat-item">
                    <span class="stat-label">Oferta:</span>
                    <span class="stat-value price">S/. {{ request.price }}</span>
                </div>
                <div class="stat-divider"></div>
                <div class="stat-item">
                    <span class="stat-label">Tiempo:</span>
                    <span class="stat-value">{{ request.months }} meses</span>
                </div>
                <div class="stat-divider"></div>
                <div class="stat-item">
                    <span class="stat-label">Inquilinos:</span>
                    <span class="stat-value">{{ request.occupants }} pers.</span>
                </div>
            </div>

            @if (request.message) {
            <div class="request-message">
                <span class="message-label">Mensaje:</span>
                <p>"{{ request.message }}"</p>
            </div>
            }

            <div class="request-footer">
                <span class="request-date">{{ request.date | date:'dd/MM/yyyy' }}</span>
                <div class="request-actions">
                    @if (request.status !== 'ACEPTADO' && request.status !== 'RECHAZADO') {
                    <button class="btn-action btn-accept" (click)="onAcceptRequest(request.requestId)">Aceptar</button>
                    <button class="btn-action btn-reject" (click)="onRejectRequest(request.requestId)">Rechazar</button>
                    }
                </div>
            </div>
        </div>
        }
    </div>
    }
</div>
